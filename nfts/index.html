<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Casino Society - NFT Gallery</title>
  <meta name="description" content="Casino Society NFT Gallery — browse PFPs, view details, and open items on xrp.cafe." />
  <link rel="stylesheet" href="../styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Arial&display=swap" rel="stylesheet">
  <link rel="icon" href="../favicon.ico" type="image/x-icon">
  <style>
    .pfps-section{padding-top:2rem;padding-bottom:4rem}
    .gallery-controls{display:flex;gap:1rem;justify-content:center;align-items:center;margin-bottom:1.25rem;flex-wrap:wrap;position:sticky;top:80px;z-index:800;background:linear-gradient(180deg,rgba(20,20,20,.95),rgba(20,20,20,.85));padding:.75rem;border-bottom:1px solid rgba(230,211,158,.06);backdrop-filter:blur(2px)}
    .gallery-controls input{padding:.6rem .8rem;border-radius:6px;border:1px solid rgba(230,211,158,.12);background:rgba(20,20,20,.6);color:var(--gold);width:280px}
    .gallery__grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:1.25rem;align-items:start}
    .flip-card{perspective:1200px}
    .flip-inner{position:relative;width:100%;height:100%;transform-style:preserve-3d;transition:transform .7s cubic-bezier(.2,.9,.2,1);cursor:pointer}
    .flip-card.is-flipped .flip-inner{transform:rotateY(180deg)}
    .flip-front,.flip-back{position:relative;backface-visibility:hidden;min-height:280px;border-radius:8px;padding:.75rem;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:.5rem;border:1px solid rgba(230,211,158,.12);background:linear-gradient(180deg,rgba(0,0,0,.35),rgba(0,0,0,.2));box-shadow:0 6px 20px rgba(200,30,30,.03)}
    .flip-front img{width:100%;height:180px;object-fit:cover;border-radius:6px;background:#111}
    .flip-back{transform:rotateY(180deg);color:var(--gold);text-align:left;overflow:auto}
    .nft-title{font-weight:700;color:var(--gold);font-size:1rem;text-align:center;margin-top:.25rem}
    .small-muted{color:rgba(230,211,158,.6);font-size:.85rem}
    .nft-modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.75);display:flex;align-items:center;justify-content:center;z-index:2000;padding:1rem;opacity:0;pointer-events:none;transition:opacity 220ms ease}
    .nft-modal-overlay.open{opacity:1;pointer-events:auto}
    .nft-modal{width:min(950px,96%);max-height:90vh;overflow:auto;border-radius:12px;border:2px solid var(--gold);background:linear-gradient(180deg,#080808,#0f0f0f);padding:1.25rem;box-shadow:0 20px 60px rgba(0,0,0,.7);position:relative}
    .nft-modal img{width:100%;border-radius:8px;border:1px solid rgba(230,211,158,.08)}
    .modal-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
    .modal-close{position:absolute;top:1rem;right:1rem;background:transparent;border:1px solid rgba(255,255,255,.1);color:var(--gold);padding:.4rem .6rem;border-radius:6px;cursor:pointer}
    .modal-actions{margin-top:1rem;display:flex;gap:.5rem;flex-wrap:wrap}
    .btn-ghost{background:transparent;border:1px solid rgba(230,211,158,.12);color:var(--gold);padding:.6rem .9rem;border-radius:6px;cursor:pointer}
    .btn-primary{background:var(--gold);color:var(--black);padding:.6rem .9rem;border-radius:6px;border:none;cursor:pointer}
    .back-to-top{position:fixed;right:18px;bottom:18px;z-index:1500;width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,var(--gold),#c8b680);color:var(--black);border:none;cursor:pointer;box-shadow:0 8px 20px rgba(0,0,0,.6);transform:translateY(120%);transition:transform 240ms ease,opacity 240ms ease;opacity:0}
    .back-to-top.visible{transform:translateY(0);opacity:1}
    #loading{text-align:center;margin:1rem 0;color:var(--white)}
    @media(max-width:800px){.modal-grid{grid-template-columns:1fr}.flip-front img{height:140px}.flip-front,.flip-back{min-height:230px}}
  </style>
</head>
<body>
  <header class="header">
    <div class="header__container">
      <a href="../index.html" class="header__logo">Casino Society</a>
      <nav class="header__nav" id="mobile-menu">
        <ul class="header__nav-list">
          <li><a href="../index.html#about" class="header__nav-link">About</a></li>
          <li><a href="../index.html#ethos" class="header__nav-link">Ethos</a></li>
          <li><a href="../index.html#collections" class="header__nav-link">NFT Collections</a></li>
          <li><a href="../index.html#memes" class="header__nav-link">Memes</a></li>
          <li><a href="../index.html#faq" class="header__nav-link">FAQ</a></li>
        </ul>
        <button class="header__menu-toggle" aria-label="Toggle Menu" id="menu-toggle">☰</button>
      </nav>
    </div>
  </header>
  <main class="main">
    <section class="section nfts-gallery">
      <div class="section__container">
        <h1 class="section__title">NFT Gallery</h1>
        <p class="section__subtitle">Explore our exclusive collections from the blockchain casino floor.</p>
        <div class="nfts__grid">
          <div class="nfts__card">
            <a href="#pfps-gallery" class="nfts__link-wrapper">
              <img src="../assets/b_garlinghouse.png" alt="Casino Society PFP Collection" loading="lazy" class="nfts__image">
              <p class="nfts__name">Casino Society PFPs</p>
            </a>
            <p class="nfts__description">A nod towards culture, discipline, and effort. Scroll down to explore the full PFP gallery.</p>
          </div>
          <div class="nfts__card">
            <a href="https://xrp.cafe/collection/casinobanners" class="nfts__link-wrapper" target="_blank" rel="noopener">
              <img src="../assets/banner_collection_brand.png" alt="Casino Society Banners" loading="lazy" class="nfts__image">
              <p class="nfts__name">Casino Society Banners</p>
            </a>
            <p class="nfts__description">Generative banners inspired by Schizo Banners for the Casino community.</p>
          </div>
          <div class="nfts__card">
            <a href="https://xrp.cafe/collection/casinocards" class="nfts__link-wrapper" target="_blank" rel="noopener">
              <img src="../assets/casino_cards_nft_thumbnail.png" alt="Casino Society Cards" loading="lazy" class="nfts__image">
              <p class="nfts__name">Casino Society Cards</p>
            </a>
            <p class="nfts__description">Fueling unbreakable resolve with the “no crying ethos.” Merging casino flair & self-mastery archetypes.</p>
          </div>
        </div>
      </div>
    </section>
    <section class="section pfps-section" id="pfps-gallery">
      <div class="section__container">
        <h2 class="section__title">Casino Society PFP Gallery</h2>
        <p class="section__subtitle">Click a photo to flip it — or open full details in the center modal.</p>
        <div class="gallery-controls">
          <input id="search-input" placeholder="Search NFTs..." aria-label="Search NFTs">
        </div>
        <div id="gallery-grid" class="gallery__grid" aria-live="polite"></div>
        <div id="loading">Loading NFTs…</div>
        <div id="scroll-sentinel" style="height:1px;"></div>
      </div>
    </section>
  </main>
  <footer class="footer">
    <div class="footer__container">
      <p>© 2025 Casino Society. All rights reserved. Send ourselves and each other higher. No Crying in the Casino.</p>
      <div class="footer__social">
        <a href="https://x.com/CasinoSociety_" class="footer__social-link">X</a>
        <span class="footer__social-divider">|</span>
        <a href="https://discord.gg/68hXWT4VAZ" class="footer__social-link">Discord</a>
      </div>
    </div>
  </footer>
  <div id="nft-modal-overlay" class="nft-modal-overlay" aria-hidden="true">
    <div class="nft-modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <button id="modal-close" class="modal-close" aria-label="Close">✕</button>
      <div id="modal-content"></div>
    </div>
  </div>
  <button id="back-to-top" class="back-to-top" title="Back to top" aria-label="Back to top">↑</button>
  <script>
    (function(){
      const CSV_PATH='NFTs.csv',PAGE_SIZE=20;
      let all=[],filtered=[],visible=0,imgKey=null,linkKey=null;
      const grid=document.getElementById('gallery-grid'),loadEl=document.getElementById('loading'),sentinel=document.getElementById('scroll-sentinel'),search=document.getElementById('search-input'),modalO=document.getElementById('nft-modal-overlay'),modalC=document.getElementById('modal-content'),modalX=document.getElementById('modal-close'),topB=document.getElementById('back-to-top');
      const ps=document.createElement('script');ps.src='https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js';ps.onload=()=>init();document.head.appendChild(ps);
      function stripBOM(s){return s?s.replace(/^\uFEFF/,''):s}
      function imgUrl(v){if(!v)return'../assets/b_garlinghouse.png';const s=String(v);const p=s.match(/\((https?:\/\/[^)]+)\)/);if(p)return p[1];const u=s.match(/https?:\/\/[^\s,"]+/);if(u)return u[0];if(s.match(/\.(png|jpg|jpeg|svg|webp)$/i))return'../assets/'+s.trim();return'../assets/b_garlinghouse.png'}
      function detect(r){const k=Object.keys(r);for(const x of k){const l=x.toLowerCase();if(!imgKey&&(l.includes('image')||l.includes('img')))imgKey=x;if(!linkKey&&(l.includes('cafe')||l.includes('link')||l.includes('url')))linkKey=x}if(!imgKey)imgKey=k.find(x=>x.toLowerCase().includes('image'))||k[0]}
      function render(){const s=visible,e=Math.min(filtered.length,s+PAGE_SIZE),f=document.createDocumentFragment();for(let i=s;i<e;i++)f.appendChild(card(filtered[i],i));grid.append(f);visible=e;loadEl.style.display=visible<filtered.length?'block':'none'}
      function searchFn(){const q=(search.value||'').toLowerCase();filtered=all.filter(n=>Object.values(n).join(' ').toLowerCase().includes(q));grid.innerHTML='';visible=0;render()}
      function card(n,i){const t=n.name||n.NFT||n.nft_number||`#${i+1}`,img=imgUrl(n[imgKey]||n.image),d=(n.description||'').slice(0,160),q=n.Quote||n.Quotes||'',tr=n.Traits||'',r=n.Rarity||'';const c=document.createElement('div');c.className='flip-card';const inner=document.createElement('div');inner.className='flip-inner';const f=document.createElement('div');f.className='flip-front';f.innerHTML=`<img src="${img}" alt="${t}"><div class="nft-title">${t}</div><div class="small-muted">${d||tr||'—'}</div>`;const b=document.createElement('div');b.className='flip-back';b.innerHTML=`<strong>${t}</strong><p class="small-muted">${r}</p><p><strong>Traits:</strong> ${tr||'—'}</p><p><strong>Quote:</strong> ${q||'—'}</p><button class="btn-ghost btn-flip-more">View full details</button>`;inner.append(f,b);c.append(inner);c.addEventListener('click',e=>{if(e.target.classList.contains('btn-flip-more')){modal(n);return}c.classList.toggle('is-flipped')});return c}
      function modal(n){const img=imgUrl(n[imgKey]||n.image),t=n.name||n.NFT||'NFT',d=n.description||n.Description||'',tr=n.Traits||'',r=n.Rarity||'',q=n.Quote||n.Quotes||'';let l='';if(linkKey&&n[linkKey])l=n[linkKey];if(!l){const v=Object.values(n).join(' ');const m=v.match(/https?:\/\/[^\s,"]+/);if(m)l=m[0]}modalC.innerHTML=`<div class="modal-grid"><div><img src="${img}" alt="${t}"></div><div><h3 style="color:var(--gold)">${t}</h3><p><strong>Rarity:</strong> ${r||'—'}</p><p><strong>Traits:</strong> ${tr||'—'}</p><p><strong>Description / Quote:</strong></p><p>${d||q||'No extra information'}</p><div class="modal-actions">${l?`<a class="btn-primary" href="${l}" target="_blank" rel="noopener">View on xrp.cafe</a>`:''}<button class="btn-ghost" id="close2">Close</button></div></div></div>`;modalO.classList.add('open');modalO.setAttribute('aria-hidden','false');document.getElementById('close2').onclick=close}
      function close(){modalO.classList.remove('open');modalO.setAttribute('aria-hidden','true')}
      const io=new IntersectionObserver(e=>{e.forEach(x=>{if(x.isIntersecting)render()})},{root:null,rootMargin:'400px',threshold:.01})
      window.addEventListener('scroll',()=>{topB.classList.toggle('visible',window.scrollY>window.innerHeight*1.5)});topB.onclick=()=>window.scrollTo({top:0,behavior:'smooth'})
      modalX.onclick=close;modalO.onclick=e=>{if(e.target===modalO)close()}
      search.addEventListener('input',()=>{clearTimeout(search._t);search._t=setTimeout(searchFn,160)})
      async function init(){try{const r=await fetch(CSV_PATH);if(!r.ok)throw new Error('fetch fail');const t=await r.text();const p=Papa.parse(t,{header:true,skipEmptyLines:true});p.meta.fields=p.meta.fields.map(f=>stripBOM(f));all=(p.data||[]).map(o=>{const x={};for(const k in o)x[stripBOM(k)]=o[k];return x});if(!all.length){loadEl.textContent='No NFTs found';return}detect(all[0]);searchFn();io.observe(sentinel);loadEl.style.display='none'}catch(e){loadEl.textContent='Error loading NFTs';console.error(e)}}
    })();
  </script>
</body>
</html>
